# 코드 리뷰 체크리스트

이 문서는 우리가족가계부 프로젝트의 코드 리뷰 시 체크해야 할 항목들을 정리한 가이드입니다.

## 📋 빠른 체크리스트

### ✅ 기본 검증 (모든 PR 필수)

- [ ] PR 제목이 명확하고 변경사항을 잘 설명하는가?
- [ ] 관련 이슈가 올바르게 링크되어 있는가?
- [ ] 모든 CI 체크가 통과했는가?
- [ ] 코드 변경량이 적절한가? (500줄 이하 권장)
- [ ] 커밋 메시지가 컨벤션을 따르는가?

### 🔍 상세 리뷰 가이드

## 1. 🚀 기능성 검토

### 핵심 기능

- [ ] **요구사항 충족**: 기능이 요구사항/이슈에서 명시한 대로 동작하는가?
- [ ] **정상 시나리오**: 기본적인 사용자 플로우가 올바르게 작동하는가?
- [ ] **엣지 케이스**: 예외적인 상황들이 적절히 처리되는가?
  - 빈 데이터, null/undefined 값
  - 네트워크 에러, API 실패
  - 권한 없는 접근
  - 유효하지 않은 입력값

### 에러 처리

- [ ] **사용자 친화적 에러**: 에러 메시지가 사용자가 이해할 수 있는가?
- [ ] **적절한 에러 레벨**: Critical/High/Medium/Low 분류가 적절한가?
- [ ] **에러 복구**: 사용자가 에러 상황에서 복구할 수 있는 방법이 있는가?
- [ ] **에러 로깅**: Sentry로 적절히 에러가 전송되는가?

### 데이터 처리

- [ ] **데이터 검증**: 입력 데이터가 서버와 클라이언트에서 모두 검증되는가?
- [ ] **타입 안전성**: TypeScript 타입이 적절히 정의되어 있는가?
- [ ] **데이터 변환**: API 응답과 UI 데이터 간 변환이 안전한가?
- [ ] **상태 관리**: 상태 업데이트가 예측 가능하고 일관적인가?

## 2. 🏗️ 코드 품질 검토

### 가독성 & 구조

- [ ] **명명 규칙**: 변수, 함수, 컴포넌트명이 명확하고 일관적인가?
- [ ] **함수 크기**: 함수가 하나의 책임만 가지며 적절한 크기인가? (20줄 이하 권장)
- [ ] **컴포넌트 구조**: React 컴포넌트가 적절히 분리되어 있는가?
- [ ] **주석**: 복잡한 비즈니스 로직에 적절한 주석이 있는가?

### SOLID 원칙 준수

- [ ] **단일 책임**: 각 함수/컴포넌트가 하나의 책임만 가지는가?
- [ ] **개방-폐쇄**: 확장에는 열려있고 수정에는 닫혀있는가?
- [ ] **의존성 역전**: 구체적 구현보다 인터페이스에 의존하는가?

### 코드 중복 & 재사용

- [ ] **DRY 원칙**: 불필요한 코드 중복이 없는가?
- [ ] **공통 컴포넌트**: 재사용 가능한 로직이 적절히 추출되었는가?
- [ ] **유틸 함수**: 공통 기능이 utils로 분리되었는가?
- [ ] **커스텀 훅**: React 로직이 적절히 훅으로 분리되었는가?

## 3. 🔒 보안 검토

### 인증 & 권한

- [ ] **인증 검증**: 모든 보호된 엔드포인트에서 인증을 확인하는가?
- [ ] **권한 검사**: 사용자가 해당 리소스에 접근 권한이 있는지 확인하는가?
- [ ] **토큰 관리**: JWT 토큰이 안전하게 저장되고 관리되는가?
- [ ] **세션 관리**: 세션 만료가 적절히 처리되는가?

### 입력 검증 & 보안

- [ ] **입력 검증**: 모든 사용자 입력이 서버에서 검증되는가?
- [ ] **SQL 인젝션**: Prisma ORM 사용으로 SQL 인젝션이 방지되는가?
- [ ] **XSS 방지**: 사용자 입력이 적절히 이스케이프되는가?
- [ ] **CSRF 방지**: 상태 변경 요청에 적절한 보호가 있는가?

### 민감 정보 보호

- [ ] **환경 변수**: 민감한 설정이 환경 변수로 관리되는가?
- [ ] **로깅 안전**: 로그에 비밀번호, 토큰 등이 기록되지 않는가?
- [ ] **클라이언트 노출**: 서버 전용 정보가 클라이언트에 노출되지 않는가?
- [ ] **Sentry 필터링**: 민감 정보가 Sentry에 전송되지 않도록 필터링되는가?

## 4. 🚀 성능 검토

### Web Vitals 성능

- [ ] **LCP 최적화**: Largest Contentful Paint ≤ 2.5초 고려
  - 이미지 최적화 (WebP/AVIF)
  - 중요 리소스 프리로드
  - 서버 응답 시간 최적화
- [ ] **CLS 방지**: Cumulative Layout Shift ≤ 0.1 준수
  - 이미지/광고 크기 지정
  - 폰트 최적화 (font-display: swap)
  - 동적 콘텐츠 영역 예약
- [ ] **INP 최적화**: Interaction to Next Paint ≤ 200ms 유지
  - 메인 스레드 차단 최소화
  - 무거운 작업 분할 또는 Web Worker 활용

### React 성능 최적화

- [ ] **메모이제이션**: `React.memo()` 적절한 적용
- [ ] **계산 최적화**: `useMemo()` 비용이 큰 계산에 사용
- [ ] **콜백 최적화**: `useCallback()` 자식 컴포넌트 최적화
- [ ] **의존성 배열**: 정확하고 최소한의 의존성만 포함
- [ ] **컴포넌트 분할**: 큰 컴포넌트의 적절한 분할

### SWR 데이터 캐싱

- [ ] **SWR 훅 사용**: API 호출에 SWR 훅 활용
- [ ] **캐시 키 설계**: 의미있고 일관된 캐시 키 사용
- [ ] **낙관적 업데이트**: 즉시 피드백이 필요한 곳에 적용
- [ ] **캐시 무효화**: 관련 데이터 변경 시 적절한 무효화
- [ ] **에러 재시도**: 네트워크 에러 시 자동 재시도 설정

### 이미지 최적화

- [ ] **OptimizedImage 사용**: 커스텀 이미지 컴포넌트 활용
- [ ] **반응형 이미지**: 디바이스별 적절한 크기 제공
- [ ] **지연 로딩**: 뷰포트 외부 이미지 지연 로딩
- [ ] **fallback 이미지**: 로딩 실패 시 대체 이미지 제공

### 데이터베이스 성능

- [ ] **쿼리 최적화**: Prisma 쿼리가 효율적인가?
- [ ] **N+1 문제**: include/select를 통해 N+1 문제가 해결되었는가?
- [ ] **인덱스**: 필요한 곳에 적절한 인덱스가 있는가?
- [ ] **페이지네이션**: 대량 데이터에 페이지네이션이 적용되었는가?

### 번들 크기 & 로딩

- [ ] **코드 스플리팅**: 적절한 동적 import가 사용되었는가?
- [ ] **이미지 최적화**: Next.js Image 컴포넌트가 사용되었는가?
- [ ] **폰트 최적화**: 웹폰트가 효율적으로 로드되는가?
- [ ] **번들 분석**: 불필요한 의존성이 추가되지 않았는가?

## 5. 🧪 테스트 검토

### 테스트 커버리지

- [ ] **단위 테스트**: 새로운 함수/컴포넌트에 적절한 테스트가 있는가?
- [ ] **통합 테스트**: API 연동 부분이 테스트되었는가?
- [ ] **E2E 테스트**: 핵심 사용자 플로우가 테스트되었는가?
- [ ] **커버리지**: 테스트 커버리지가 80% 이상인가?

### 테스트 품질

- [ ] **의미 있는 테스트**: 테스트가 실제 버그를 잡을 수 있는가?
- [ ] **테스트 독립성**: 테스트가 서로 독립적으로 실행되는가?
- [ ] **모킹**: 외부 의존성이 적절히 모킹되었는가?
- [ ] **테스트 데이터**: 테스트 데이터가 현실적이고 다양한가?

### 테스트 실행

- [ ] **로컬 실행**: 개발자 환경에서 모든 테스트가 통과하는가?
- [ ] **CI 통과**: CI 환경에서도 안정적으로 실행되는가?
- [ ] **테스트 속도**: 테스트 실행 시간이 적절한가?
- [ ] **플레이키 테스트**: 간헐적으로 실패하는 테스트가 없는가?

## 6. 📱 사용자 경험 (UX) 검토

### 인터페이스 품질

- [ ] **반응형 디자인**: 모바일/태블릿/데스크톱에서 적절히 동작하는가?
- [ ] **로딩 상태**: 사용자가 기다리는 동안 적절한 피드백이 있는가?
- [ ] **에러 상태**: 에러 발생시 사용자가 이해할 수 있는 메시지가 있는가?
- [ ] **빈 상태**: 데이터가 없을 때 적절한 안내가 있는가?

### 접근성 (Accessibility)

- [ ] **키보드 네비게이션**: 마우스 없이도 모든 기능에 접근할 수 있는가?
- [ ] **ARIA 라벨**: 스크린 리더를 위한 적절한 라벨이 있는가?
- [ ] **색상 대비**: 충분한 색상 대비가 있는가?
- [ ] **포커스 표시**: 키보드 포커스가 명확히 표시되는가?

### 성능 사용자 경험

- [ ] **로딩 시간**: 페이지 로딩이 2.5초 이내인가?
- [ ] **상호작용**: 사용자 액션에 즉시 반응하는가?
- [ ] **애니메이션**: 부드러운 전환 효과가 있는가?
- [ ] **오프라인**: 네트워크 연결이 불안정할 때도 기본 기능이 동작하는가?

## 7. 🛠️ 기술적 검토

### Next.js 베스트 프랙티스

- [ ] **App Router**: 새로운 App Router 패턴을 적절히 사용하는가?
- [ ] **서버 컴포넌트**: 서버/클라이언트 컴포넌트가 적절히 분리되었는가?
- [ ] **메타데이터**: SEO를 위한 적절한 메타데이터가 있는가?
- [ ] **Dynamic Routes**: 동적 라우팅이 적절히 구현되었는가?

### TypeScript 활용

- [ ] **타입 정의**: 모든 데이터에 적절한 타입이 정의되었는가?
- [ ] **타입 안전성**: `any` 타입의 사용이 최소화되었는가?
- [ ] **제네릭**: 재사용 가능한 타입에 제네릭이 사용되었는가?
- [ ] **타입 가드**: 런타임 타입 검증이 필요한 곳에 타입 가드가 있는가?

### 의존성 관리

- [ ] **필요한 의존성**: 추가된 의존성이 실제로 필요한가?
- [ ] **보안 업데이트**: 알려진 보안 취약점이 있는 패키지를 사용하지 않는가?
- [ ] **라이센스**: 사용된 라이브러리의 라이센스가 프로젝트와 호환되는가?
- [ ] **번들 영향**: 새 의존성이 번들 크기에 미치는 영향이 적절한가?

## 8. 📚 문서화 검토

### 코드 문서화

- [ ] **API 문서**: 새로운 API에 대한 문서가 작성되었는가?
- [ ] **컴포넌트 문서**: 복잡한 컴포넌트에 대한 설명이 있는가?
- [ ] **설정 문서**: 새로운 설정이나 환경 변수가 문서화되었는가?
- [ ] **README 업데이트**: 프로젝트 변경사항이 README에 반영되었는가?

### 기술 문서

- [ ] **아키텍처 문서**: 주요 구조 변경시 아키텍처 문서가 업데이트되었는가?
- [ ] **배포 가이드**: 배포 관련 변경사항이 문서화되었는가?
- [ ] **troubleshooting**: 알려진 문제와 해결 방법이 문서화되었는가?
- [ ] **마이그레이션**: 데이터베이스 변경시 마이그레이션 가이드가 있는가?

## 🚨 긴급 체크리스트 (핫픽스용)

핫픽스나 긴급 배포시 최소한으로 확인해야 할 항목들:

### 필수 확인사항

- [ ] **문제 해결**: 보고된 문제가 실제로 해결되었는가?
- [ ] **부작용 없음**: 다른 기능에 영향을 주지 않는가?
- [ ] **보안 검토**: 보안 취약점을 도입하지 않았는가?
- [ ] **롤백 계획**: 문제 발생시 롤백 계획이 있는가?

### 최소 테스트

- [ ] **핵심 기능**: 사용자 로그인, 주요 기능이 동작하는가?
- [ ] **데이터 무결성**: 데이터 손실이나 corrupted 없는가?
- [ ] **성능 영향**: 성능에 심각한 영향을 주지 않는가?
- [ ] **모니터링**: 에러 모니터링이 정상 작동하는가?

## 📊 리뷰 결과 체크리스트

### 승인 조건

- [ ] 모든 필수 항목이 만족되었다
- [ ] 보안 이슈가 없다
- [ ] 성능에 심각한 영향이 없다
- [ ] 테스트가 충분하다
- [ ] 문서가 적절히 업데이트되었다

### 조건부 승인

- [ ] 사소한 개선사항만 남아있다
- [ ] 별도 이슈로 추후 해결할 수 있는 문제들이다
- [ ] 현재 변경사항이 충분히 가치있다

### 승인 거부

- [ ] 보안 취약점이 있다
- [ ] 기존 기능을 손상시킨다
- [ ] 테스트가 부족하다
- [ ] 성능에 심각한 영향을 준다
- [ ] 요구사항을 충족하지 않는다

---

## 💡 리뷰 팁

### 리뷰어를 위한 팁

1. **건설적 피드백**: 문제를 지적할 때는 개선 방안도 함께 제시
2. **칭찬도 함께**: 좋은 코드에 대해서는 적극적으로 칭찬
3. **우선순위**: 중요한 문제와 선택사항을 구분
4. **학습 기회**: 새로운 패턴이나 기술에 대해 설명

### PR 작성자를 위한 팁

1. **자체 리뷰**: PR 생성 전 스스로 한 번 더 검토
2. **컨텍스트 제공**: 왜 이런 방식으로 구현했는지 설명
3. **테스트 방법**: 어떻게 테스트했는지 상세히 기술
4. **스크린샷**: UI 변경사항은 시각적으로 보여주기

이 체크리스트는 팀의 코드 품질 향상과 함께 지속적으로 업데이트될 예정입니다.
